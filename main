class Product:

    def __init__(self, name, price, quantity, category):
        self.name = Product.valid_name(name)
        self.price = price
        self.quantity = quantity
        self.category = category

    @property
    def price(self):
        return self.__price

    @price.setter
    def price(self, new_price):
        if new_price <= 0:
            raise ValueError("–¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–ª–µ–≤–æ–π –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π")
        self.__price = round(new_price, 2)

    @property
    def quantity(self):
        return self.__quantity

    @quantity.setter
    def quantity(self, new_quantity):
        if new_quantity < 0:
            raise ValueError("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º")
        self.__quantity = new_quantity

    def apply_discount(self, percent):
        if percent >= 100:
            print("–í–≤–µ–¥–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∫–∏–¥–∫–∞")
            return
        self.price = round(self.price * (100 - percent) / 100, 2)
        print(f'–¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç {self.price}')

    def sell(self, amount):
        if amount > self.quantity:
            raise ValueError(f'‚ùå–û—à–∏–±–∫–∞ - –Ω–∞ —Å–∫–ª–∞–¥–µ –≤—Å–µ–≥–æ {self.quantity}')
        self.quantity -= amount
        print(f'–ü—Ä–æ–¥–∞–Ω–æ {amount} —à—Ç—É–∫, –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ - {self.quantity}')

    def restock(self, amount):
        self.quantity += amount
        print(f'–ó–∞–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–æ {amount} —à—Ç—É–∫, –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ - {self.quantity}')

    def info(self):
        print("=" * 40)
        print(f'–Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: {self.name}')
        print(f'—Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞: {self.price}{Product.unit}')
        print(f'–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ: {self.quantity}')
        print(f'–∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞: {self.category}')

    @staticmethod
    def valid_name(name):
        if name == "" or len(name) < 3:
            raise ValueError('–•—É–π–Ω—è, –∞ –Ω–µ –∏–º—è, –¥–∞–≤–∞–π –¥—Ä—É–≥–æ–µ')
        return name

    unit = "‚ÇΩ"

    def __str__(self):
        return f'{self.name}, {self.price}'

    def __repr__(self):
        return f'{self.name}, {self.price}, {self.category}'


class Electronics(Product):
    def __init__(self, name, price, quantity, category, months):
        super().__init__(name, price, quantity, category)
        self.warranty = months

    @property
    def warranty(self):
        return self.__warranty

    @warranty.setter
    def warranty(self, new_warranty):
        if new_warranty < 0:
            raise ValueError("–ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π —Å—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º")
        self.__warranty = new_warranty

    def info(self):
        super().info()
        print(f'–≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ç–æ–≤–∞—Ä: {self.warranty}')


class Book(Product):
    def __init__(self, name, price, quantity, category, autor, pages):
        super().__init__(name, price, quantity, category)
        self.autor = autor
        self.pages = pages

    @property
    def pages(self):
        return self.__pages

    @pages.setter
    def pages(self, new_pages):
        if new_pages <= 0:
            raise ValueError('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è')
        self.__pages = new_pages

    @property
    def autor(self):
        return self.__autor

    @autor.setter
    def autor(self, new_autor):
        if not isinstance(new_autor, str):
            raise ValueError('–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π')
        if not new_autor:
            raise ValueError('–ò–º—è –∞–≤—Ç–æ—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')
        self.__autor = new_autor

    def info(self):
        super().info()
        print(f'–ê–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏: {self.autor}')
        print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü: {self.pages}')


class ShopingCart:
    def __init__(self):
        self.items = []

    def add_product(self, product, quantity):

        for item in self.items:
            if item[0] == product:
                item[1] += quantity
                print(f'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ {product.name} —É–≤–µ–ª–∏—á–µ–Ω–æ –Ω–∞ {quantity}')
                return
        else:
            self.items.append([product, quantity])

        print(f'‚úÖ –í –∫–æ—Ä–∑–∏–Ω—É –¥–æ–±–∞–≤–∏–ª–∏ {product.name}, –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ {quantity} ')

    def info(self):
        print('=' * 40)
        print('üõí –°–û–î–ï–†–ñ–ò–ú–û–ï –ö–û–†–ó–ò–ù–´:')
        print('=' * 40)

        total = 0
        for item in self.items:
            product = item[0]  # –æ–±—ä–µ–∫—Ç Product
            quantity = item[1]  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
            price = product.price * quantity
            total += price
            print(f'‚Ä¢ {product.name} x {quantity} = {price} ‚ÇΩ')

        print('=' * 40)
        print(f'üí∞ –ò–¢–û–ì–û: {total} ‚ÇΩ')
        print('=' * 40)

    def remove_product(self, product, quantity):
        for item in self.items:
            if item[0] == product:  # –Ω–∞—à–ª–∏ —Ç–æ–≤–∞—Ä
                if quantity >= item[1]:  # –µ—Å–ª–∏ —É–¥–∞–ª—è–µ–º –≤—Å—ë
                    self.items.remove(item)
                    print(f'‚úÖ –¢–æ–≤–∞—Ä "{product.name}" –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã')
                else:  # —É–¥–∞–ª—è–µ–º —á–∞—Å—Ç—å
                    item[1] -= quantity
                    print(f'‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ "{product.name}" —É–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ {quantity}')
                return

            print(f'‚ùå –¢–æ–≤–∞—Ä "{product.name}" –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω–µ')

    def checkout(self):
        try:
            for item in self.items:
                item[0].sell(item[1])
            self.receive()
            self.items = []
        except ValueError as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞: {e}")
            print("‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑")

    def receive(self):
        print('=' * 40)
        print('üõí –¢–û–í–ê–†–ù–´–ô –ß–ï–ö:')
        print('=' * 40)

        total = 0
        for item in self.items:
            product = item[0]  # –æ–±—ä–µ–∫—Ç Product
            quantity = item[1]  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
            price = product.price * quantity
            total += price
            print(f'‚Ä¢ {product.name} x {quantity} = {price} ‚ÇΩ')

        print('=' * 40)
        print(f'üí∞ –ò–¢–û–ì–û: {total} ‚ÇΩ')
        print('=' * 40)
        print(f'–°–ü–ê–°–ò–ë–û –ó–ê –ü–û–ö–£–ü–ö–£! –ñ–î–Å–ú –í–ê–° –°–ù–û–í–ê')



ipad = Electronics("Ipad", 35000, 13, "tablet", 24)
ipad.info()

iphone11 = Product("Iphone 11", 35000, 130, "mobile")
casio_gshock = Product("G-Shock 5600", 6000, 340, "watch")
macbookpro = Product("Apple MacBook PRO m2", 150000, 377, "laptop")

redmi_note = Electronics("Redmi NOTE", 25000, 23, "mobile", 12)

fight_club = Book("–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±", 250, 300, 'book', '–ß–∞–∫ –ü–∞–ª–∞–Ω–∏–∫', 356)
fight_club.info()
fight_club.autor = "–•—É–π –ì–æ–≤–Ω–æ –∏ –ú—É—Ä–∞–≤–µ–π"
fight_club.info()
redmi_note.info()
cart1 = ShopingCart()
cart1.add_product(macbookpro, 1)
cart1.add_product(macbookpro, 10)
cart1.add_product(iphone11, 30)
cart1.add_product(iphone11, 15)
cart1.add_product(casio_gshock, 10)
# cart1.remove_product(iphone11, 1)
# cart1.add_product(casio_gshock, 3)
cart1.info()
macbookpro.price = 9999
print(cart1.items)
print(iphone11)
